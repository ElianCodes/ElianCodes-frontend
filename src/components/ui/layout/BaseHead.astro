---
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<head>
	<meta charset='utf-8' />
	<link rel='icon' type='image/svg+xml' href='/favicon.svg' />
	<meta name='viewport' content='width=device-width' />
	<meta name='generator' content={Astro.generator} />
	<title>Elian Codes | {title}</title>
	<meta
		name='keywords'
		content='HTML, CSS, JavaScript, Astro, Public Speaking'
	/>
	<meta name='author' content='Elian Van Cutsem' />

	<slot />

	<!-- Plausible Analytics -->
	<script
		is:inline
		defer
		data-domain='elian.codes'
		src='https://plausible.eliancodes.synology.me/js/script.file-downloads.outbound-links.js'
	></script>
	<!-- Google tag (gtag.js) -->
	<script
		is:inline
		async
		src='https://www.googletagmanager.com/gtag/js?id=G-13MBMB5GZJ'></script>
	<script is:inline>
		window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'G-13MBMB5GZJ');
	</script>
	<script is:inline>
		(function () {
			/** @type {any} */
			var w = window;
			w.plausible =
				w.plausible ||
				function () {
					(w.plausible.q = w.plausible.q || []).push(arguments);
				};
		})();
	</script>
</head>

<script is:inline>
	const theme = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
			return 'dark';
		}
		return 'light';
	};

	const applyTheme = () => {
		if (theme() === 'light') {
			document.documentElement.classList.remove('dark');
		} else {
			document.documentElement.classList.add('dark');
		}
	};

	window
		.matchMedia('(prefers-color-scheme: dark)')
		.addEventListener('change', (event) => {
			event.matches
				? window.localStorage.setItem('theme', 'dark')
				: window.localStorage.setItem('theme', 'light');
			applyTheme();
		});

	window.localStorage.setItem('theme', theme());
	applyTheme();
</script>
